\documentclass[11pt]{article}\usepackage[]{graphicx}\usepackage[]{color}
% maxwidth is the original width if it is less than linewidth
% otherwise use linewidth (to make sure the graphics do not exceed the margin)
\makeatletter
\def\maxwidth{ %
  \ifdim\Gin@nat@width>\linewidth
    \linewidth
  \else
    \Gin@nat@width
  \fi
}
\makeatother

\definecolor{fgcolor}{rgb}{0.345, 0.345, 0.345}
\newcommand{\hlnum}[1]{\textcolor[rgb]{0.686,0.059,0.569}{#1}}%
\newcommand{\hlstr}[1]{\textcolor[rgb]{0.192,0.494,0.8}{#1}}%
\newcommand{\hlcom}[1]{\textcolor[rgb]{0.678,0.584,0.686}{\textit{#1}}}%
\newcommand{\hlopt}[1]{\textcolor[rgb]{0,0,0}{#1}}%
\newcommand{\hlstd}[1]{\textcolor[rgb]{0.345,0.345,0.345}{#1}}%
\newcommand{\hlkwa}[1]{\textcolor[rgb]{0.161,0.373,0.58}{\textbf{#1}}}%
\newcommand{\hlkwb}[1]{\textcolor[rgb]{0.69,0.353,0.396}{#1}}%
\newcommand{\hlkwc}[1]{\textcolor[rgb]{0.333,0.667,0.333}{#1}}%
\newcommand{\hlkwd}[1]{\textcolor[rgb]{0.737,0.353,0.396}{\textbf{#1}}}%
\let\hlipl\hlkwb

\usepackage{framed}
\makeatletter
\newenvironment{kframe}{%
 \def\at@end@of@kframe{}%
 \ifinner\ifhmode%
  \def\at@end@of@kframe{\end{minipage}}%
  \begin{minipage}{\columnwidth}%
 \fi\fi%
 \def\FrameCommand##1{\hskip\@totalleftmargin \hskip-\fboxsep
 \colorbox{shadecolor}{##1}\hskip-\fboxsep
     % There is no \\@totalrightmargin, so:
     \hskip-\linewidth \hskip-\@totalleftmargin \hskip\columnwidth}%
 \MakeFramed {\advance\hsize-\width
   \@totalleftmargin\z@ \linewidth\hsize
   \@setminipage}}%
 {\par\unskip\endMakeFramed%
 \at@end@of@kframe}
\makeatother

\definecolor{shadecolor}{rgb}{.97, .97, .97}
\definecolor{messagecolor}{rgb}{0, 0, 0}
\definecolor{warningcolor}{rgb}{1, 0, 1}
\definecolor{errorcolor}{rgb}{1, 0, 0}
\newenvironment{knitrout}{}{} % an empty environment to be redefined in TeX

\usepackage{alltt}

\usepackage[T1]{fontenc}
\usepackage[polish]{babel}
\usepackage[utf8]{inputenc}
\usepackage{lmodern}
\selectlanguage{polish}
\usepackage{graphicx}
\usepackage{float}
\usepackage[a4paper, total={6.5in, 9.5in}]{geometry}
\usepackage{amsmath}
\usepackage{amsfonts}
\usepackage[hidelinks]{hyperref}
\usepackage{tabularx}
\usepackage{fancyhdr}
\pagestyle{fancy}

\urlstyle{rm}
  
\usepackage{setspace}
\newtheorem{stat}{Statement}
\newtheorem{theorem}{Theorem}
\newtheorem{defi}{Definition}
\newtheorem{lem}[stat]{Lemma}
\newtheorem{ex}{Example}[section]
\newtheorem{fact}{Fact}

\frenchspacing
\IfFileExists{upquote.sty}{\usepackage{upquote}}{}
\begin{document}


\title{Bank Marketing data (with social/economic context)}
\author{Maciej Maæˆ¼ã¸³ecki}
\maketitle
\abstract{W pliku Bank Marketing data.csv znajdujæˆ¼ã¸¹ siæ”¼ã¹¡ dane charakteryzujæˆ¼ã¸¹ce klientæ˜¼ã¸³w pewnego banku oraz kampanie marketingowe skierowane do tych klientæ˜¼ã¸³w. Doæˆ¼ã¸³æˆ¼ã¸¹czone sæˆ¼ã¸¹ ponadto wskaã¤¼ã¹¦niki spoæˆ¼ã¸³eczne i ekonomiczne. Na podstawie tych danych naleæˆ¼ã¹¦y zbudowaæ”¼ã¸¶ model prognozujæˆ¼ã¸¹cy szansæ”¼ã¹¡, æˆ¼ã¹¦e klient w wyniku prowadzonej kampanii zaæˆ¼ã¸³oæˆ¼ã¹¦y lokatæ”¼ã¹¡ terminowæˆ¼ã¸¹.}
\tableofcontents

\newpage

\section{Wprowadzenie}
\subsection{Opis problemu}
W ramach kampani marketingowej organizowanej przez pewien bank w latach miæ”¼ã¹¡dzy majem 2008 rok, a listopadem 2010 roku, byæˆ¼ã¸³y zbierane informacje na temat klientæ˜¼ã¸³w tego banku. 
Na podstawie tych danych planowane jest przewidzenie, czy i jakie rodzaj klientæ˜¼ã¸³w kupi lokatæ”¼ã¹¡ terminowæˆ¼ã¸¹ w tym banku.

\subsection{Opis danych}
Nasze dane zawierajæˆ¼ã¸¹ 21 column danych. Kolumny moæˆ¼ã¹¦emy podzieliæ”¼ã¸¶ na 3 grupy:

\textbf{I: Zmienne zwiæˆ¼ã¸¹zane z danymi klienta bankowego:}

\begin{enumerate}
\item Wiek (age): wiek klienta.
\item Praca (job): rodzaj pracy klienta.
\item Stan cywilny (marital): stan cywilny klienta.
\item Edukacja (education): edukacja klienta.
\item Domyã¤¼ã¹£lnie (default): Klient wczeã¤¼ã¹£niej domyã¤¼ã¹£lnie miaæˆ¼ã¸³ kredyt.
\item Mieszkanie (housing): Klient ma kredyt mieszkaniowy.
\item Poæˆ¼ã¹¦yczka (loan): Klient ma osobistæˆ¼ã¸¹ poæˆ¼ã¹¦yczkæ”¼ã¹¡.
\end{enumerate}


\textbf{II: Zmienne zwiæˆ¼ã¸¹zane z ostatnim kontaktem bieæˆ¼ã¹¦æˆ¼ã¸¹cej kampanii marketingowej:}

\begin{enumerate}
\setcounter{enumi}{7}
\item Kontakt (contact): Typ komunikacji kontaktowej (telefonicznej lub komæ˜¼ã¸³rkowej).
\item Miesiæˆ¼ã¸¹c (month): Ostatni kontakt miesiæˆ¼ã¸¹ca roku.
\item Dzieæ˜¼ã¸± tygodnia (day of week): dzieæ˜¼ã¸± ostatniego kontaktu tygodnia.
\item Czas trwania (duration): czas trwania ostatniego kontaktu w sekundach. Jeã¤¼ã¹£li czas trwania wynosi 0, nigdy nie skontaktowaliã¤¼ã¹£my siæ”¼ã¹¡ z klientem, aby zaæˆ¼ã¸³oæˆ¼ã¹¦yæ”¼ã¸¶ konto lokaty terminowej.
\item Kampania (campaign): liczba kontaktæ˜¼ã¸³w wykonanych podczas tej kampanii i dla tego klienta
\item Liczba dni (pdays): liczba dni, ktæ˜¼ã¸³re upæˆ¼ã¸³ynæ”¼ã¹¡æˆ¼ã¸³y od ostatniego kontaktu klienta z poprzedniej kampanii (wartoã¤¼ã¹£æ”¼ã¸¶ liczbowa; 999 oznacza, æˆ¼ã¹¦e klient wczeã¤¼ã¹£niej siæ”¼ã¹¡ nie skontaktowaæˆ¼ã¸³)
\item Poprzedni (previous): liczba kontaktæ˜¼ã¸³w wykonanych przed tæˆ¼ã¸¹ kampaniæˆ¼ã¸¹ i dla tego klienta (numerycznie)
\item Poutcome: wynik poprzedniej kampanii marketingowej (kategorycznie: ã ¼ã¸´poraæˆ¼ã¹¦kaã¤¼ã¸´, ã ¼ã¸´nieistniejæˆ¼ã¸¹caã¤¼ã¸´, ã ¼ã¸´sukcesã¤¼ã¸´)
\end{enumerate}

\textbf{III: Atrybuty kontekstu spoæˆ¼ã¸³ecznego i gospodarczego:}

\begin{enumerate}
\setcounter{enumi}{15}
\item Emp.var.rate: wskaã¤¼ã¹¦nik zmiennoã¤¼ã¹£ci zatrudnienia - wskaã¤¼ã¹¦nik kwartalny 
\item Cons.price.idx: wskaã¤¼ã¹¦nik cen konsumpcyjnych - wskaã¤¼ã¹¦nik miesiæ”¼ã¹¡czny 
\item Cons.conf.idx: wskaã¤¼ã¹¦nik zaufania konsumentæ˜¼ã¸³w - wskaã¤¼ã¹¦nik miesiæ”¼ã¹¡czny 
\item Euribor3m: stawka 3-miesiæ”¼ã¹¡czna euribor - wskaã¤¼ã¹¦nik dzienny 
\item Liczba zatrudnionych (nr employed): liczba pracownikæ˜¼ã¸³w - wskaã¤¼ã¹¦nik kwartalny 
\end{enumerate}


\textbf{Zmienna wyjã¤¼ã¹£ciowa (poæˆ¼ã¹¦æˆ¼ã¸¹dany cel):}

\begin{enumerate}
\setcounter{enumi}{20}
\item y - czy klient subskrybowaæˆ¼ã¸³ lokatæ”¼ã¹¡? (dwæ˜¼ã¸³jkowy: ã ¼ã¸´takã¤¼ã¸´, ã ¼ã¸´nieã¤¼ã¸´)
\end{enumerate}

\subsection{Wstæ”¼ã¹¡pna eksploracja danych}



Badane dane zawieraj¹ 4119 wierszy oraz 21 kolumn o nastêpuj¹cych nazwach:

\begin{knitrout}
\definecolor{shadecolor}{rgb}{0.969, 0.969, 0.969}\color{fgcolor}\begin{kframe}
\begin{verbatim}
##  [1] "age"            "job"            "marital"        "education"     
##  [5] "default"        "housing"        "loan"           "contact"       
##  [9] "month"          "day_of_week"    "duration"       "campaign"      
## [13] "pdays"          "previous"       "poutcome"       "emp.var.rate"  
## [17] "cons.price.idx" "cons.conf.idx"  "euribor3m"      "nr.employed"   
## [21] "y"
\end{verbatim}
\end{kframe}
\end{knitrout}

Struktura danych:
\begin{knitrout}
\definecolor{shadecolor}{rgb}{0.969, 0.969, 0.969}\color{fgcolor}\begin{kframe}
\begin{alltt}
\hlkwd{str}\hlstd{(df_bank)}
\end{alltt}
\begin{verbatim}
## 'data.frame':	4119 obs. of  21 variables:
##  $ age           : int  30 39 25 38 47 32 32 41 31 35 ...
##  $ job           : chr  "blue-collar" "services" "services" "services" ...
##  $ marital       : chr  "married" "single" "married" "married" ...
##  $ education     : chr  "basic.9y" "high.school" "high.school" "basic.9y" ...
##  $ default       : chr  "no" "no" "no" "no" ...
##  $ housing       : chr  "yes" "no" "yes" "unknown" ...
##  $ loan          : chr  "no" "no" "no" "unknown" ...
##  $ contact       : chr  "cellular" "telephone" "telephone" "telephone" ...
##  $ month         : chr  "may" "may" "jun" "jun" ...
##  $ day_of_week   : chr  "fri" "fri" "wed" "fri" ...
##  $ duration      : int  487 346 227 17 58 128 290 44 68 170 ...
##  $ campaign      : int  2 4 1 3 1 3 4 2 1 1 ...
##  $ pdays         : int  999 999 999 999 999 999 999 999 999 999 ...
##  $ previous      : int  0 0 0 0 0 2 0 0 1 0 ...
##  $ poutcome      : chr  "nonexistent" "nonexistent" "nonexistent" "nonexistent" ...
##  $ emp.var.rate  : num  -1.8 1.1 1.4 1.4 -0.1 -1.1 -1.1 -0.1 -0.1 1.1 ...
##  $ cons.price.idx: num  92.9 94 94.5 94.5 93.2 ...
##  $ cons.conf.idx : num  -46.2 -36.4 -41.8 -41.8 -42 -37.5 -37.5 -42 -42 -36.4 ...
##  $ euribor3m     : num  1.31 4.86 4.96 4.96 4.19 ...
##  $ nr.employed   : num  5099 5191 5228 5228 5196 ...
##  $ y             : chr  "no" "no" "no" "no" ...
\end{verbatim}
\end{kframe}
\end{knitrout}

Czy w danych znajduj¹ siê wartoœci typu \verb+NaN+ lub \verb+Na+ ?
\begin{knitrout}
\definecolor{shadecolor}{rgb}{0.969, 0.969, 0.969}\color{fgcolor}\begin{kframe}
\begin{verbatim}
## [1] FALSE
\end{verbatim}
\end{kframe}
\end{knitrout}

Jednak¿e wiemy, ¿e w danych wystêpuj¹ wartoœci brakuj¹ce i s¹ one opisa "unknown". W danych znajduje siê 1230  rekordów z wartoœci¹ "unknown" rozmieszczonych w 1029 ró¿nych wierszach. To stanowi $24.98\% $ wszystkich wierszy w naszej badzie danych, wiêc nie mo¿emy pozwoliæ sobie na usuniêcie tych wszystkich informacji. W tabeli 1 znajduj¹ siê informacje na temat liczny nieznanych wartoœci  w ka¿dej z kolumn z osobna.




\begin{knitrout}
\definecolor{shadecolor}{rgb}{0.969, 0.969, 0.969}\color{fgcolor}\begin{kframe}


{\ttfamily\noindent\bfseries\color{errorcolor}{\#\# Error: nie znaleziono obiektu 'Number\_of\_unknown'}}

{\ttfamily\noindent\bfseries\color{errorcolor}{\#\# Error in eval(expr, envir, enclos): nie znaleziono obiektu 'table\_unknown'}}\end{kframe}
\end{knitrout}
\newpage

\section{Analiza eksploracyjna}


W tej sekcji zostanie omówiony ka¿dy parametr z osobna. Nastêpnie dane zostan¹ odpowiednio przygotowane do wykorzystania ich w modelach predykcyjnych.




%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%



\subsection{Age}
Przedzia³ wiekowy osób bior¹cych kredyt szacuje siê miedzy 18 rokiem ¿ycia, a 88 rokiem ¿ycia. Jednak¿e mo¿na zauwa¿yæ,
¿e osoby które ukoñczy³y 60 rok ¿ycia z wiêksz¹ chêci¹ bra³y lokaty, ni¿ tego nie robi³y. Œredni wiek utrzymuje siê na poziomie 40 lat.
Wiedz¹c, ¿e osoby odk³adaj¹ na lokaty fundusze wtedy, kiedy dobrze zaczynaj¹ zarabniaæ to podzieli³bym ludzi ze wzglêdu na wiek.
 Miêdzy wiekiem [MIN, 30] <- young, [30,65] <- worker, [65, MAX] <- pensioner. Taki podzia³ powinien u³atwiæ analizê przysz³ych algorytmów.



\begin{knitrout}
\definecolor{shadecolor}{rgb}{0.969, 0.969, 0.969}\color{fgcolor}\begin{kframe}
\begin{verbatim}
##    Min. 1st Qu.  Median    Mean 3rd Qu.    Max. 
##   18.00   32.00   38.00   40.11   47.00   88.00
\end{verbatim}
\end{kframe}
\end{knitrout}

\begin{knitrout}
\definecolor{shadecolor}{rgb}{0.969, 0.969, 0.969}\color{fgcolor}\begin{figure}[H]

{\centering \includegraphics[width=\maxwidth]{figure/unnamed-chunk-10-1} 

}

\caption[Histogram wieku klient<U+663C><U+3E33>w w zale<U+623C><U+3E66>no<U+393C><U+3E63>ci od wzi<U+653C><U+3E61>cia lokaty d<U+623C><U+3E33>ugoterminowej]{Histogram wieku klient<U+663C><U+3E33>w w zale<U+623C><U+3E66>no<U+393C><U+3E63>ci od wzi<U+653C><U+3E61>cia lokaty d<U+623C><U+3E33>ugoterminowej.}\label{fig:unnamed-chunk-10}
\end{figure}


\end{knitrout}

\begin{knitrout}
\definecolor{shadecolor}{rgb}{0.969, 0.969, 0.969}\color{fgcolor}\begin{figure}[H]

{\centering \includegraphics[width=\maxwidth]{figure/unnamed-chunk-11-1} 

}

\caption[Boxplot wieku klient<U+663C><U+3E33>w w zale<U+623C><U+3E66>no<U+393C><U+3E63>ci od wzi<U+653C><U+3E61>cia lokaty d<U+623C><U+3E33>ugoterminowej]{Boxplot wieku klient<U+663C><U+3E33>w w zale<U+623C><U+3E66>no<U+393C><U+3E63>ci od wzi<U+653C><U+3E61>cia lokaty d<U+623C><U+3E33>ugoterminowej.}\label{fig:unnamed-chunk-11}
\end{figure}


\end{knitrout}



%---------------------------------------------------------------------------------------------------------------------------------------%
%---------------------------------------------------------------------------------------------------------------------------------------%

\subsection{Job}
W tej kolumnie mamy 39 wartoœci nieznanych, co stanowi ledwo 1\% ca³ego zbioru, wiêc pozbywamy siê wierszy, które zawieraj¹ tê informacjê.

\begin{knitrout}
\definecolor{shadecolor}{rgb}{0.969, 0.969, 0.969}\color{fgcolor}\begin{figure}[H]

{\centering \includegraphics[width=\maxwidth]{figure/unnamed-chunk-13-1} 

}

\caption[Barplot  a)  przedstwiaj<U+623C><U+3E39>cy jak wiele os<U+663C><U+3E33>b  za<U+623C><U+3E33>o<U+623C><U+3E66>y<U+623C><U+3E33>o lokat<U+653C><U+3E61> w zale<U+623C><U+3E66>no<U+393C><U+3E63>ci od zawodu, b) przedstwiaj<U+623C><U+3E39>cy stosunek procentowy os<U+663C><U+3E33>b,  kt<U+663C><U+3E33>re za<U+623C><U+3E33>o<U+623C><U+3E66>y<U+623C><U+3E33>y lokat<U+653C><U+3E61> z zale<U+623C><U+3E66>no<U+393C><U+3E63>ci od pracy]{Barplot  a)  przedstwiaj<U+623C><U+3E39>cy jak wiele os<U+663C><U+3E33>b  za<U+623C><U+3E33>o<U+623C><U+3E66>y<U+623C><U+3E33>o lokat<U+653C><U+3E61> w zale<U+623C><U+3E66>no<U+393C><U+3E63>ci od zawodu, b) przedstwiaj<U+623C><U+3E39>cy stosunek procentowy os<U+663C><U+3E33>b,  kt<U+663C><U+3E33>re za<U+623C><U+3E33>o<U+623C><U+3E66>y<U+623C><U+3E33>y lokat<U+653C><U+3E61> z zale<U+623C><U+3E66>no<U+393C><U+3E63>ci od pracy.}\label{fig:unnamed-chunk-13}
\end{figure}


\end{knitrout}

%---------------------------------------------------------------------------------------------------------------------------------------%
\newpage
%---------------------------------------------------------------------------------------------------------------------------------------%

\subsection{Marital status}
Sytuacja taka sama jak przy kolumnie 'job'. Mamy tutaj nieznane wartoœci, ale stanowi¹ one tylko 0.3\% wszystkich danych, wiêc równie¿ usuwamy te wiersze.

\begin{knitrout}
\definecolor{shadecolor}{rgb}{0.969, 0.969, 0.969}\color{fgcolor}\begin{figure}[H]

{\centering \includegraphics[width=\maxwidth]{figure/unnamed-chunk-14-1} 

}

\caption[Barplot  a) przedstwiaj<U+623C><U+3E39>cy jak wiele os<U+663C><U+3E33>b za<U+623C><U+3E33>o<U+623C><U+3E66>y<U+623C><U+3E33>o lokat<U+653C><U+3E61> w zale<U+623C><U+3E66>no<U+393C><U+3E63>ci od stanu cywilnego]{Barplot  a) przedstwiaj<U+623C><U+3E39>cy jak wiele os<U+663C><U+3E33>b za<U+623C><U+3E33>o<U+623C><U+3E66>y<U+623C><U+3E33>o lokat<U+653C><U+3E61> w zale<U+623C><U+3E66>no<U+393C><U+3E63>ci od stanu cywilnego; b) przedstwiaj<U+623C><U+3E39>cy stosunek procentowy os<U+663C><U+3E33>b, kt<U+663C><U+3E33>re za<U+623C><U+3E33>o<U+623C><U+3E66>y<U+623C><U+3E33>y lokat<U+653C><U+3E61> z zale<U+623C><U+3E66>no<U+393C><U+3E63>ci od stanu cywilnego.}\label{fig:unnamed-chunk-14}
\end{figure}


\end{knitrout}




%---------------------------------------------------------------------------------------------------------------------------------------%
\newpage
%---------------------------------------------------------------------------------------------------------------------------------------%

\subsection{Education}
Pula klientów bêd¹cymi 'illiterate' zawieta tylko jedn¹ osobê, wiêc statystycznie taka obserwacja nic nam nie daje.
Natomiast w tym przypadku mamy problem z nieznanymi wartoœciami. Po pierwsze stanowi¹ one 4.1\% wszystkich badanych.
Najbardziej podobne proporcje danych miêdzy 'yes' i 'no' ma categoria klientów, którzu ukoñczyli uniwersytet, wiêc wszystkich klientów 'unknown'
dodam do tej puli klientów.

\begin{knitrout}
\definecolor{shadecolor}{rgb}{0.969, 0.969, 0.969}\color{fgcolor}\begin{figure}[H]

{\centering \includegraphics[width=\maxwidth]{figure/unnamed-chunk-16-1} 

}

\caption[Barplot  a) przedstwiaj<U+623C><U+3E39>cy jak wiele os<U+663C><U+3E33>b za<U+623C><U+3E33>o<U+623C><U+3E66>y<U+623C><U+3E33>o lokat<U+653C><U+3E61> w zale<U+623C><U+3E66>no<U+393C><U+3E63>ci od poziomu wykszta<U+623C><U+3E33>cenia]{Barplot  a) przedstwiaj<U+623C><U+3E39>cy jak wiele os<U+663C><U+3E33>b za<U+623C><U+3E33>o<U+623C><U+3E66>y<U+623C><U+3E33>o lokat<U+653C><U+3E61> w zale<U+623C><U+3E66>no<U+393C><U+3E63>ci od poziomu wykszta<U+623C><U+3E33>cenia; b) przedstwiaj<U+623C><U+3E39>cy stosunek procentowy os<U+663C><U+3E33>b, kt<U+663C><U+3E33>re za<U+623C><U+3E33>o<U+623C><U+3E66>y<U+623C><U+3E33>y lokat<U+653C><U+3E61> z zale<U+623C><U+3E66>no<U+393C><U+3E63>ci od poziomu wykszta<U+623C><U+3E33>cenia.}\label{fig:unnamed-chunk-16}
\end{figure}


\end{knitrout}




%---------------------------------------------------------------------------------------------------------------------------------------%
\newpage
%---------------------------------------------------------------------------------------------------------------------------------------%

\subsection{Has credit in default?}
Ta kolumna nie przedstawia wystarczaj¹cej iloœci danych o osóbach, które domyœlnie wzie³y ten kredyt.
Z tego powodu ta kolumna nie bêdzie mia³a ¿adnego wiêkszego wp³ywu na nasze modele, dlatego j¹ usuwamy.
\begin{knitrout}
\definecolor{shadecolor}{rgb}{0.969, 0.969, 0.969}\color{fgcolor}\begin{figure}[H]

{\centering \includegraphics[width=\maxwidth]{figure/unnamed-chunk-18-1} 

}

\caption[Barplot  a) przedstwiaj<U+623C><U+3E39>cy jak wiele os<U+663C><U+3E33>b za<U+623C><U+3E33>o<U+623C><U+3E66>y<U+623C><U+3E33>o lokat<U+653C><U+3E61> w zale<U+623C><U+3E66>no<U+393C><U+3E63>ci od posiadania kredytu]{Barplot  a) przedstwiaj<U+623C><U+3E39>cy jak wiele os<U+663C><U+3E33>b za<U+623C><U+3E33>o<U+623C><U+3E66>y<U+623C><U+3E33>o lokat<U+653C><U+3E61> w zale<U+623C><U+3E66>no<U+393C><U+3E63>ci od posiadania kredytu; b) przedstwiaj<U+623C><U+3E39>cy stosunek procentowy os<U+663C><U+3E33>b, kt<U+663C><U+3E33>re za<U+623C><U+3E33>o<U+623C><U+3E66>y<U+623C><U+3E33>y lokat<U+653C><U+3E61> z zale<U+623C><U+3E66>no<U+393C><U+3E63>ci od posiadania kredytu.}\label{fig:unnamed-chunk-18}
\end{figure}


\end{knitrout}




%---------------------------------------------------------------------------------------------------------------------------------------%
\newpage
%---------------------------------------------------------------------------------------------------------------------------------------%

\subsection{Has personal loan?}
W tej kolumnie znajduj¹ siê informacje na temat posiadania kredytu hipotecznego (kredytu na dom). Iloœæ danych nieznanych odpowiada, 2,5\% wszystkich obserwacji,
Nie mo¿emy pozwoliæ sobie na usuniêcie tak du¿ej liczny wierszy, a pod³aczenie do jakieœ innej opcji nie wchodzi w grê.
PrzeprowadŸmy testy na niezale¿noœæ zmiennych kategorycznych. Wykonamy test chisq w zelu zbadania niezale¿noœci miêdzy 2 zmiennymi.
\begin{knitrout}
\definecolor{shadecolor}{rgb}{0.969, 0.969, 0.969}\color{fgcolor}\begin{figure}[H]

{\centering \includegraphics[width=\maxwidth]{figure/unnamed-chunk-20-1} 

}

\caption[Barplot  a) przedstwiaj<U+623C><U+3E39>cy jak wiele os<U+663C><U+3E33>b za<U+623C><U+3E33>o<U+623C><U+3E66>y<U+623C><U+3E33>o lokat<U+653C><U+3E61> w zale<U+623C><U+3E66>no<U+393C><U+3E63>ci od ju<U+623C><U+3E66> posiadanej po<U+623C><U+3E66>yczki]{Barplot  a) przedstwiaj<U+623C><U+3E39>cy jak wiele os<U+663C><U+3E33>b za<U+623C><U+3E33>o<U+623C><U+3E66>y<U+623C><U+3E33>o lokat<U+653C><U+3E61> w zale<U+623C><U+3E66>no<U+393C><U+3E63>ci od ju<U+623C><U+3E66> posiadanej po<U+623C><U+3E66>yczki; b) przedstwiaj<U+623C><U+3E39>cy stosunek procentowy os<U+663C><U+3E33>b, kt<U+663C><U+3E33>re za<U+623C><U+3E33>o<U+623C><U+3E66>y<U+623C><U+3E33>y lokat<U+653C><U+3E61> z zale<U+623C><U+3E66>no<U+393C><U+3E63>ci od posiadanej po<U+623C><U+3E66>yczki.}\label{fig:unnamed-chunk-20}
\end{figure}


\end{knitrout}

\begin{knitrout}
\definecolor{shadecolor}{rgb}{0.969, 0.969, 0.969}\color{fgcolor}\begin{kframe}
\begin{verbatim}
## 
## 	Pearson's Chi-squared test
## 
## data:  df_bank$housing and df_bank$y
## X-squared = 0.62865, df = 2, p-value = 0.7303
\end{verbatim}
\end{kframe}
\end{knitrout}
Niestety poziom istotnoœci(p-value) na poziomie 73\% œwiadczy o du¿ej zale¿noœci miêdzy danymi, wiêc tej zmiennej ró¿nie¿ nie bêdê bra³ pod uwagê.



%---------------------------------------------------------------------------------------------------------------------------------------%
\newpage
%---------------------------------------------------------------------------------------------------------------------------------------%

\subsection{Has credit in default?}
W tej kolumnie znajduj¹ siê informacje na temat posiadania kredytu. Sytuacja jest ta sama co w przypadku kredytu hipotecznego.
Nie mo¿emy pozwoliæ sobie na usuniêcie tak du¿ej liczny wierszy (2.5\%), a pod³aczenie do jakieœ innej opcji nie wchodzi w grê.
Wykonamy test chisq w zelu zbadania niezale¿noœci miêdzy 2 zmiennymi.
\begin{knitrout}
\definecolor{shadecolor}{rgb}{0.969, 0.969, 0.969}\color{fgcolor}\begin{figure}[H]

{\centering \includegraphics[width=\maxwidth]{figure/unnamed-chunk-23-1} 

}

\caption[Barplot  a) przedstwiaj<U+623C><U+3E39>cy jak wiele os<U+663C><U+3E33>b za<U+623C><U+3E33>o<U+623C><U+3E66>y<U+623C><U+3E33>o lokat<U+653C><U+3E61> w zale<U+623C><U+3E66>no<U+393C><U+3E63>ci od domy<U+393C><U+3E63>lnie posiadanego kredytu]{Barplot  a) przedstwiaj<U+623C><U+3E39>cy jak wiele os<U+663C><U+3E33>b za<U+623C><U+3E33>o<U+623C><U+3E66>y<U+623C><U+3E33>o lokat<U+653C><U+3E61> w zale<U+623C><U+3E66>no<U+393C><U+3E63>ci od domy<U+393C><U+3E63>lnie posiadanego kredytu; b) przedstwiaj<U+623C><U+3E39>cy stosunek procentowy os<U+663C><U+3E33>b, kt<U+663C><U+3E33>re za<U+623C><U+3E33>o<U+623C><U+3E66>y<U+623C><U+3E33>y lokat<U+653C><U+3E61> z zale<U+623C><U+3E66>no<U+393C><U+3E63>ci od domy<U+393C><U+3E63>lnie posiadanego kredytu.}\label{fig:unnamed-chunk-23}
\end{figure}


\end{knitrout}

\begin{knitrout}
\definecolor{shadecolor}{rgb}{0.969, 0.969, 0.969}\color{fgcolor}\begin{kframe}
\begin{verbatim}
## 
## 	Pearson's Chi-squared test
## 
## data:  df_bank$loan and df_bank$y
## X-squared = 1.123, df = 2, p-value = 0.5703
\end{verbatim}
\end{kframe}
\end{knitrout}
Poziom istotnoœci(p-value) na poziomie 56.8\% œwiadczy o du¿ej zale¿noœci miêdzy danymi, wiêc tej zmiennej ró¿nie¿ nie bêdê bra³ pod uwagê.





%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%---------------------------------------------------------------------------------------------------------------------------------------%
\newpage
%---------------------------------------------------------------------------------------------------------------------------------------%

\subsection{Contact communication type}
Osoby, z którymi próbowano siê skontaktowaæ na telefon komórkowy stanowi¹ 64.4\% ca³ej badanej spo³ecznoœci i co 6 osoba z nich wzie³a lokatê d³ugoterminow¹.
\begin{knitrout}
\definecolor{shadecolor}{rgb}{0.969, 0.969, 0.969}\color{fgcolor}\begin{figure}[H]

{\centering \includegraphics[width=\maxwidth]{figure/unnamed-chunk-26-1} 

}

\caption[Barplot a) przedstwiaj<U+623C><U+3E39>cy jak wiele os<U+663C><U+3E33>b za<U+623C><U+3E33>o<U+623C><U+3E66>y<U+623C><U+3E33>o lokat<U+653C><U+3E61> w zale<U+623C><U+3E66>no<U+393C><U+3E63>ci od sposobu kontaktu z klientem]{Barplot a) przedstwiaj<U+623C><U+3E39>cy jak wiele os<U+663C><U+3E33>b za<U+623C><U+3E33>o<U+623C><U+3E66>y<U+623C><U+3E33>o lokat<U+653C><U+3E61> w zale<U+623C><U+3E66>no<U+393C><U+3E63>ci od sposobu kontaktu z klientem; b) przedstwiaj<U+623C><U+3E39>cy stosunek procentowy os<U+663C><U+3E33>b, kt<U+663C><U+3E33>re za<U+623C><U+3E33>o<U+623C><U+3E66>y<U+623C><U+3E33>y lokat<U+653C><U+3E61> z zale<U+623C><U+3E66>no<U+393C><U+3E63>ci od sposobu kontaktu z klientem.}\label{fig:unnamed-chunk-26}
\end{figure}


\end{knitrout}


%---------------------------------------------------------------------------------------------------------------------------------------%
\newpage
%---------------------------------------------------------------------------------------------------------------------------------------%

\subsection{Last contact month of year}
Ciekaw¹ sutuacj¹ jest fact, ¿e w zestawieniu w ogóle nie mamy tranzakcji ze stycznia oraz z lutego.

\begin{knitrout}
\definecolor{shadecolor}{rgb}{0.969, 0.969, 0.969}\color{fgcolor}\begin{figure}[H]

{\centering \includegraphics[width=\maxwidth]{figure/unnamed-chunk-27-1} 

}

\caption[Barplot  a) przedstwiaj<U+623C><U+3E39>cy jak wiele os<U+663C><U+3E33>b za<U+623C><U+3E33>o<U+623C><U+3E66>y<U+623C><U+3E33>o lokat<U+653C><U+3E61> w zale<U+623C><U+3E66>no<U+393C><U+3E63>ci od miesi<U+623C><U+3E39>ca, w kt<U+663C><U+3E33>rym kontaktowano si<U+653C><U+3E61> z klientem]{Barplot  a) przedstwiaj<U+623C><U+3E39>cy jak wiele os<U+663C><U+3E33>b za<U+623C><U+3E33>o<U+623C><U+3E66>y<U+623C><U+3E33>o lokat<U+653C><U+3E61> w zale<U+623C><U+3E66>no<U+393C><U+3E63>ci od miesi<U+623C><U+3E39>ca, w kt<U+663C><U+3E33>rym kontaktowano si<U+653C><U+3E61> z klientem; b) przedstwiaj<U+623C><U+3E39>cy stosunek procentowy os<U+663C><U+3E33>b, kt<U+663C><U+3E33>re za<U+623C><U+3E33>o<U+623C><U+3E66>y<U+623C><U+3E33>y lokat<U+653C><U+3E61> z zale<U+623C><U+3E66>no<U+393C><U+3E63>ci od miesi<U+623C><U+3E39>ca, w kt<U+663C><U+3E33>rym kontaktowano si<U+653C><U+3E61> z klientem.}\label{fig:unnamed-chunk-27}
\end{figure}


\end{knitrout}


%---------------------------------------------------------------------------------------------------------------------------------------%
\newpage
%---------------------------------------------------------------------------------------------------------------------------------------%

\subsection{Last contact day of the week}
W ka¿dym roboczym dniu tygodnia jest wykonywane mniej wiêcej tyle samo po³¹czeñ z klientami,
wiêc nie jesteœmy w stanie wyci¹gn¹æ ¿adnych wiêkszych wniosków, z obserwacji samych wykresów.
\begin{knitrout}
\definecolor{shadecolor}{rgb}{0.969, 0.969, 0.969}\color{fgcolor}\begin{figure}[H]

{\centering \includegraphics[width=\maxwidth]{figure/unnamed-chunk-28-1} 

}

\caption[Barplot  a) przedstwiaj<U+623C><U+3E39>cy jak wiele os<U+663C><U+3E33>b za<U+623C><U+3E33>o<U+623C><U+3E66>y<U+623C><U+3E33>o lokat<U+653C><U+3E61> w zale<U+623C><U+3E66>no<U+393C><U+3E63>ci od dnia, w kt<U+663C><U+3E33>rym kontaktowano si<U+653C><U+3E61> z klientem]{Barplot  a) przedstwiaj<U+623C><U+3E39>cy jak wiele os<U+663C><U+3E33>b za<U+623C><U+3E33>o<U+623C><U+3E66>y<U+623C><U+3E33>o lokat<U+653C><U+3E61> w zale<U+623C><U+3E66>no<U+393C><U+3E63>ci od dnia, w kt<U+663C><U+3E33>rym kontaktowano si<U+653C><U+3E61> z klientem; b) przedstwiaj<U+623C><U+3E39>cy stosunek procentowy os<U+663C><U+3E33>b, kt<U+663C><U+3E33>re za<U+623C><U+3E33>o<U+623C><U+3E66>y<U+623C><U+3E33>y lokat<U+653C><U+3E61> z zale<U+623C><U+3E66>no<U+393C><U+3E63>ci od dnia, w kt<U+663C><U+3E33>rym kontaktowano si<U+653C><U+3E61> z klientem.}\label{fig:unnamed-chunk-28}
\end{figure}


\end{knitrout}


\subsection{Last contact duration, in seconds}
Czas trwania ostatniego kontaktu jest atrybutem, który ma du¿y wp³yw na cel wyjœciowy (y)
Wa¿na uwaga: ten atrybut ma du¿y wp³yw na cel wyjœciowy. Jednak czas trwania nie jest znany przed wykonaniem po³¹czenia.
Ponadto po zakoñczeniu po³¹czenia "y" jest oczywiœcie znane. W zwi¹zku z tym  nale¿y j¹ odrzuciæ, jeœli chcemy stworzenie realistycznego modelu predykcyjnego.



%---------------------------------------------------------------------------------------------------------------------------------------%
\newpage
%---------------------------------------------------------------------------------------------------------------------------------------%

\subsection{Campaign}
W tej kolumnie zawieraj¹ siê informacje dotycz¹ce liczby po³¹czeñ do danego klienta w ramach kampani.
Przygl¹daj¹c siê boxplotowi mo¿emy zauwa¿yæ, ¿e obserwacje od 7 s¹ ju¿ uwa¿ane jako wartoœci odstaj¹ce.
W zwi¹zku z czym wszystkie watroœci, które s¹ wiêksze ni¿ 7, ale mniejsze ni¿ 12 zamieniê na 7+, a nastêpnie zamienie na zmienn¹ kategoryczn¹.
Zmienne powyzej 12 odrzucam.
\begin{knitrout}
\definecolor{shadecolor}{rgb}{0.969, 0.969, 0.969}\color{fgcolor}\begin{figure}[H]

{\centering \includegraphics[width=\maxwidth]{figure/unnamed-chunk-30-1} 

}

\caption[Barplot  a) przedstwiaj<U+623C><U+3E39>cy jak wiele os<U+663C><U+3E33>b za<U+623C><U+3E33>o<U+623C><U+3E66>y<U+623C><U+3E33>o lokat<U+653C><U+3E61> w zale<U+623C><U+3E66>no<U+393C><U+3E63>ci od liczby wykonanych telefon<U+663C><U+3E33>w do klienta]{Barplot  a) przedstwiaj<U+623C><U+3E39>cy jak wiele os<U+663C><U+3E33>b za<U+623C><U+3E33>o<U+623C><U+3E66>y<U+623C><U+3E33>o lokat<U+653C><U+3E61> w zale<U+623C><U+3E66>no<U+393C><U+3E63>ci od liczby wykonanych telefon<U+663C><U+3E33>w do klienta; b) przedstwiaj<U+623C><U+3E39>cy stosunek procentowy os<U+663C><U+3E33>b, kt<U+663C><U+3E33>re za<U+623C><U+3E33>o<U+623C><U+3E66>y<U+623C><U+3E33>y lokat<U+653C><U+3E61> z zale<U+623C><U+3E66>no<U+393C><U+3E63>ci od liczby wykonanych telefon<U+663C><U+3E33>w do klienta.}\label{fig:unnamed-chunk-301}
\end{figure}

\begin{figure}[H]

{\centering \includegraphics[width=\maxwidth]{figure/unnamed-chunk-30-2} 

}

\caption[Barplot  a) przedstwiaj<U+623C><U+3E39>cy jak wiele os<U+663C><U+3E33>b za<U+623C><U+3E33>o<U+623C><U+3E66>y<U+623C><U+3E33>o lokat<U+653C><U+3E61> w zale<U+623C><U+3E66>no<U+393C><U+3E63>ci od liczby wykonanych telefon<U+663C><U+3E33>w do klienta]{Barplot  a) przedstwiaj<U+623C><U+3E39>cy jak wiele os<U+663C><U+3E33>b za<U+623C><U+3E33>o<U+623C><U+3E66>y<U+623C><U+3E33>o lokat<U+653C><U+3E61> w zale<U+623C><U+3E66>no<U+393C><U+3E63>ci od liczby wykonanych telefon<U+663C><U+3E33>w do klienta; b) przedstwiaj<U+623C><U+3E39>cy stosunek procentowy os<U+663C><U+3E33>b, kt<U+663C><U+3E33>re za<U+623C><U+3E33>o<U+623C><U+3E66>y<U+623C><U+3E33>y lokat<U+653C><U+3E61> z zale<U+623C><U+3E66>no<U+393C><U+3E63>ci od liczby wykonanych telefon<U+663C><U+3E33>w do klienta.}\label{fig:unnamed-chunk-302}
\end{figure}

\begin{kframe}\begin{verbatim}
##    Min. 1st Qu.  Median    Mean 3rd Qu.    Max. 
##   1.000   1.000   2.000   2.537   3.000  35.000
\end{verbatim}
\end{kframe}
\end{knitrout}



%---------------------------------------------------------------------------------------------------------------------------------------%
\newpage
%---------------------------------------------------------------------------------------------------------------------------------------%

\subsection{Pdays}
Kolumna 'pdays' znajduj¹ siê informacje o iloœci dni od ostatniego kontaktu z klientem podczas poprzedniej kampanii. Jeœli wartoœc wynosi "999" to oznacza, ze nigdy siê z dan¹ osob¹ nie skontaktowane.
Informacja zawarta w tej kolumnie jest zbyt rozproszona i niejednoznaczna. W zwi¹zku z tym t¹ informacjê zamienimy w taki sposób, zeby odpowiada³a na pytanie: czy kontaktowano siê z dan¹ osob¹ w poprzedniej kampani?

\begin{knitrout}
\definecolor{shadecolor}{rgb}{0.969, 0.969, 0.969}\color{fgcolor}\begin{kframe}
\begin{verbatim}
##    Min. 1st Qu.  Median    Mean 3rd Qu.    Max. 
##     0.0   999.0   999.0   959.8   999.0   999.0
\end{verbatim}
\end{kframe}
\end{knitrout}


\subsection{Previous}
Zmienna 'previous' zawiera informacje dotycz¹ce liczby kontaktów wykonanych przed t¹ kampani¹ do tego klienta. W obecnym stanie, ta zmienna zwraca bardzo podobne wyniki co zmienna "pdays binary".
Poniewa¿ liczba klientów, ¿ którymi kontaktowano siê 2 i wiêcej razy jest wyj¹tkowa ma³a w stosunku do osób, z którymi siê nie kontaktowano to propnujê po³¹czyæ te zmienne w wiêksz¹ ca³oœæ.
Tak przygotowana zmienna powie nam, czy nêkanie osób poprzez czêstrze kontakty telefoniczne daje wymierne skutki.







%---------------------------------------------------------------------------------------------------------------------------------------%
\newpage
%---------------------------------------------------------------------------------------------------------------------------------------%

\subsection{Poutcome}
Czy sukces lub pora¿ka podczas poprzedniej kampani da³y siê odczyæ w obecnej kampani??
Jak najbardziej. A¿ 64.8\% osób chcia³bo przed³u¿yæ swoj¹ lokatê. 14.8\% osób , mimo ¿e ostatnio nie wzieli lokaty to czas to czas miêdzy kampaniami da³ im sporo do myœlenia i spowodowa³,
¿e osoby, z którymi siê kontaktowano w poprzedniej kampani chêtniej bra³y lokatê d³ugoterminow¹ ni¿ osoby, z kótrymi kontaktowano siê pierwszy raz.
\begin{knitrout}
\definecolor{shadecolor}{rgb}{0.969, 0.969, 0.969}\color{fgcolor}\begin{figure}[H]

{\centering \includegraphics[width=\maxwidth]{figure/unnamed-chunk-34-1} 

}

\caption[Barplot  a) przedstwiaj<U+623C><U+3E39>cy jak wiele os<U+663C><U+3E33>b za<U+623C><U+3E33>o<U+623C><U+3E66>y<U+623C><U+3E33>o lokat<U+653C><U+3E61> w zale<U+623C><U+3E66>no<U+393C><U+3E63>ci od sukcesu w poprzedniej kampanii]{Barplot  a) przedstwiaj<U+623C><U+3E39>cy jak wiele os<U+663C><U+3E33>b za<U+623C><U+3E33>o<U+623C><U+3E66>y<U+623C><U+3E33>o lokat<U+653C><U+3E61> w zale<U+623C><U+3E66>no<U+393C><U+3E63>ci od sukcesu w poprzedniej kampanii; b) przedstwiaj<U+623C><U+3E39>cy stosunek procentowy os<U+663C><U+3E33>b, kt<U+663C><U+3E33>re za<U+623C><U+3E33>o<U+623C><U+3E66>y<U+623C><U+3E33>y lokat<U+653C><U+3E61> z zale<U+623C><U+3E66>no<U+393C><U+3E63>ci od sukcesu w poprzedniej kampanii.}\label{fig:unnamed-chunk-34}
\end{figure}


\end{knitrout}



%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

%---------------------------------------------------------------------------------------------------------------------------------------%
\newpage
%---------------------------------------------------------------------------------------------------------------------------------------%

\subsection{Social and economic context attributes}

Ostatnie 5 wspó³czynników to wskaŸniki spo³eczne oraz ekonomiczne. Analiza ka¿dej z osobna jest nie pokaz³a ¿adnej charakterystycznej cech.
Jednak¿e te zmienne powinny byæ jakoœ skorelowane ze sob¹, wiêc obliczmy macierz korelacji.

\begin{knitrout}
\definecolor{shadecolor}{rgb}{0.969, 0.969, 0.969}\color{fgcolor}\begin{figure}[H]

{\centering \includegraphics[width=\maxwidth]{figure/unnamed-chunk-35-1} 

}

\caption[Macierz korelacji mi<U+653C><U+3E61>dzy zmiennymi numerycznymi wyst<U+653C><U+3E61>puj<U+623C><U+3E39>cymi w naszej bazie danych]{Macierz korelacji mi<U+653C><U+3E61>dzy zmiennymi numerycznymi wyst<U+653C><U+3E61>puj<U+623C><U+3E39>cymi w naszej bazie danych.}\label{fig:unnamed-chunk-35}
\end{figure}


\end{knitrout}

Zgodnie z oczekiwaniami, zmienne spo³eczne i ekonomiczne s¹ silnie ze sob¹ skorelowane. Szczególnym przypadkiem silnego skorelowania charakteryzuje siê zmienna
eps.price.rate, która jest wska¿nikiem zmiennoœci zatrudnienia. W zwi¹zku z czym ta zmienna zostaje usuniêta.




\subsection{y = cel prognocy}
Czyli czy klient korzysta³ lokaty czy nie? (dwójkowy: „tak”, „nie”)
POniewa¿ nie mozeby zostawiæ tej zmiennej w postaci zmiennej characterystycznej, musimy zamieniæ j¹ na zmienn¹ numeryczn¹.




\section{Obróbka danych na potrzeby modeli}
W tej czêœci zostan¹ wykonane 2 kroki potrzebne do prawid³owego dzia³ania modeli predykcyjnych oraz poprawienia wyników modeli.
\subsuction{Normalizacja}
Celem normalizacji jest ujednolicenie danych wejœciowych, numerycznych poprzez ich przescalowanie. W tym przypadku bêdê skalowa³ dane do rozk³adu normalnego.

\subsection{Zamiana zmiennych typu \vert+character+ na \verb+factor+}
¯eby model regresji logistyczne oraz XGBoost mog³y prawid³owo dzia³aæ nale¿y zmieniæ zmienne kategoryczne na zmiennej fikcyjne (dummy variable).


\section{Predykcja modeli}
\subsection{Podzia³ i tworzenie zbioru ucz¹cego i testowego}
Nasze dane s¹ ju¿ prawie gotowe do dzielenia na zbiór treningowy oraz zbiór walidacyjny. W pierwszej kolejnoœci chcia³bym znormalizowaæ nasze dane.
Tak zabieg mo¿e poprawiæ jakoœ niektórych modeli np. logistic regresion. Nastêpnie dane zostan¹ podzielone w stosunku 80/20.
Dane treningowe pos³u¿¹ do wytrenowania naszego modelu, natomiast dane testowe zostan¹ wykorzystane podczas walidacji modelu.

Dane na chwilê obecna wygl¹daj¹ w sposób nastêpuj¹cy

\begin{knitrout}
\definecolor{shadecolor}{rgb}{0.969, 0.969, 0.969}\color{fgcolor}\begin{kframe}
\begin{verbatim}
## Observations: 4,055
## Variables: 16
## $ job             <chr> "blue-collar", "services", "services", "servic...
## $ marital         <chr> "married", "single", "married", "married", "ma...
## $ education       <chr> "basic.9y", "high.school", "high.school", "bas...
## $ contact         <chr> "cellular", "telephone", "telephone", "telepho...
## $ month           <chr> "may", "may", "jun", "jun", "nov", "sep", "sep...
## $ day_of_week     <chr> "fri", "fri", "wed", "fri", "mon", "thu", "mon...
## $ campaign        <chr> "2", "4", "1", "3", "1", "3", "4", "2", "1", "...
## $ previous        <chr> "0", "0", "0", "0", "0", "2+", "0", "0", "1", ...
## $ poutcome        <chr> "nonexistent", "nonexistent", "nonexistent", "...
## $ cons.price.idx  <dbl> 92.893, 93.994, 94.465, 94.465, 93.200, 94.199...
## $ cons.conf.idx   <dbl> -46.2, -36.4, -41.8, -41.8, -42.0, -37.5, -37....
## $ euribor3m       <dbl> 1.313, 4.855, 4.962, 4.959, 4.191, 0.884, 0.87...
## $ nr.employed     <dbl> 5099.1, 5191.0, 5228.1, 5228.1, 5195.8, 4963.6...
## $ y               <fct> 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0...
## $ age_categorical <chr> "worker", "worker", "young", "worker", "worker...
## $ pdays_call      <chr> "no", "no", "no", "no", "no", "no", "no", "no"...
\end{verbatim}
\end{kframe}
\end{knitrout}

\begin{knitrout}
\definecolor{shadecolor}{rgb}{0.969, 0.969, 0.969}\color{fgcolor}\begin{kframe}
\begin{verbatim}
## 
##  
##    Cell Contents
## |-------------------------|
## |                       N |
## |         N / Table Total |
## |-------------------------|
## 
##  
## Total Observations in Table:  3244 
## 
##  
##           |         0 |         1 | 
##           |-----------|-----------|
##           |      2884 |       360 | 
##           |     0.889 |     0.111 | 
##           |-----------|-----------|
## 
## 
## 
## 
## 
##  
##    Cell Contents
## |-------------------------|
## |                       N |
## |         N / Table Total |
## |-------------------------|
## 
##  
## Total Observations in Table:  811 
## 
##  
##           |         0 |         1 | 
##           |-----------|-----------|
##           |       721 |        90 | 
##           |     0.889 |     0.111 | 
##           |-----------|-----------|
## 
## 
## 
## 
\end{verbatim}
\end{kframe}
\end{knitrout}

\subsection{Dobór miar}
Na tym etapie przystêpujemy do generalnego opisu danych i co hcemy wyci¹gn¹æ z danych:
\begin{iteration}
\item Nasze dane s¹ mocno niezrównowa¿one (stosunek 89/11). To powoduje, ze ³atwo bêdzie nam osi¹gn¹æ wysobie accuracy, które w rzeczywistoœci mo¿e nie oddawaæ dok³adnie tego co chcemy;
\item Nasz model ma przewidywaæ, który klient rzeczywiœcie za³o¿y lokatê d³ugoterminow¹. Patrz¹c na "Confusion matrix", ta miara jest opisana przez True Positive (TP).
\item Pod miar¹ "False Positive" (FP) bêd¹ kryli siê klienci, którzy jeszcze nie bêd¹ gotowi na za³o¿enie lokaty d³ugoterminowej
\item Pod miar¹ "False Negative" (FN) bêd¹ kryli siê klienci, którzy s¹ chêtni za³ozyæ lokatê, jednak¿e ban siê z nimi nie skontaktowa³. Ta miara w naszym przypadku bêdzie przynosiæ najwiêksze straty dla banku.
\item A pod ostatni¹ miar¹ "True negative" (TN) bêd¹ wszyscy klienci banku, którzy rzeczywiœcie nie chc¹ za³o¿yæ lokaty.
\item Czyli, ¿eby maksymalizowaæ zyski musimy skupiæ siê na maksymalizacji miar "Recall", "Precision" oraz f11 score z g³ównym skupieniem siê na f1 score, poniewa¿ jest to œrednia harmoniczna z "Recall" oraz "Precision".
\item W dalszym etapie porównywania modeli skupimy siê na porównaniach  krzywych ROC i krzywych PR.
\end{iteration}

\subsection{Tworzenie modeli predykcyjnych}
W ramach tej czêsci bêdê wykorzystywa³ bibliotekê \verb+mlr+ do stworzenia 4 modeli:
\begin{itemize}
\item Logistic regression
\item Random forest
\item SVM
\item XGBoost
\end{itemize}
\subsubsection{Logistic Regresion}
\begin{knitrout}
\definecolor{shadecolor}{rgb}{0.969, 0.969, 0.969}\color{fgcolor}\begin{kframe}
\begin{verbatim}
##          Type len  Def Constr Req Tunable Trafo
## model logical   - TRUE      -   -   FALSE     -
\end{verbatim}


{\ttfamily\noindent\bfseries\color{errorcolor}{\#\# Error in checkClass(x, classes, ordered, null.ok): nie znaleziono obiektu 'trainTask'}}

{\ttfamily\noindent\bfseries\color{errorcolor}{\#\# Error in checkClass(x, classes, ordered, null.ok): nie znaleziono obiektu 'trainTask'}}

{\ttfamily\noindent\bfseries\color{errorcolor}{\#\# Error in getLearnerModel(logistic\_model): nie znaleziono obiektu 'logistic\_model'}}

{\ttfamily\noindent\bfseries\color{errorcolor}{\#\# Error in predict(logistic\_model, testTask): nie znaleziono obiektu 'logistic\_model'}}

{\ttfamily\noindent\bfseries\color{errorcolor}{\#\# Error in checkClass(x, classes, ordered, null.ok): nie znaleziono obiektu 'log\_pred'}}\end{kframe}
\end{knitrout}
\subsubsection{Random Forest}
\begin{knitrout}
\definecolor{shadecolor}{rgb}{0.969, 0.969, 0.969}\color{fgcolor}\begin{kframe}
\begin{verbatim}
##                      Type  len   Def   Constr Req Tunable Trafo
## ntree             integer    -   500 1 to Inf   -    TRUE     -
## mtry              integer    -     - 1 to Inf   -    TRUE     -
## replace           logical    -  TRUE        -   -    TRUE     -
## classwt     numericvector <NA>     - 0 to Inf   -    TRUE     -
## cutoff      numericvector <NA>     -   0 to 1   -    TRUE     -
## strata            untyped    -     -        -   -   FALSE     -
## sampsize    integervector <NA>     - 1 to Inf   -    TRUE     -
## nodesize          integer    -     1 1 to Inf   -    TRUE     -
## maxnodes          integer    -     - 1 to Inf   -    TRUE     -
## importance        logical    - FALSE        -   -    TRUE     -
## localImp          logical    - FALSE        -   -    TRUE     -
## proximity         logical    - FALSE        -   -   FALSE     -
## oob.prox          logical    -     -        -   Y   FALSE     -
## norm.votes        logical    -  TRUE        -   -   FALSE     -
## do.trace          logical    - FALSE        -   -   FALSE     -
## keep.forest       logical    -  TRUE        -   -   FALSE     -
## keep.inbag        logical    - FALSE        -   -   FALSE     -
\end{verbatim}


{\ttfamily\noindent\bfseries\color{errorcolor}{\#\# Error in checkClass(x, classes, ordered, null.ok): nie znaleziono obiektu 'trainTask'}}

{\ttfamily\noindent\bfseries\color{errorcolor}{\#\# Error in isTRUE(lhs): nie znaleziono obiektu 'rf\_tune\_params'}}

{\ttfamily\noindent\bfseries\color{errorcolor}{\#\# Error in checkLearner(learner): nie znaleziono obiektu 'rf\_tuned\_learner'}}

{\ttfamily\noindent\bfseries\color{errorcolor}{\#\# Error in predict(rf\_model, testTask): nie znaleziono obiektu 'rf\_model'}}

{\ttfamily\noindent\bfseries\color{errorcolor}{\#\# Error in checkClass(x, classes, ordered, null.ok): nie znaleziono obiektu 'rf\_pred'}}\end{kframe}
\end{knitrout}
\subsubsection{SVM}
\begin{knitrout}
\definecolor{shadecolor}{rgb}{0.969, 0.969, 0.969}\color{fgcolor}\begin{kframe}
\begin{verbatim}
##                        Type  len    Def
## scaled              logical    -   TRUE
## type               discrete    -  C-svc
## kernel             discrete    - rbfdot
## C                   numeric    -      1
## nu                  numeric    -    0.2
## epsilon             numeric    -    0.1
## sigma               numeric    -      -
## degree              integer    -      3
## scale               numeric    -      1
## offset              numeric    -      1
## order               integer    -      1
## tol                 numeric    -  0.001
## shrinking           logical    -   TRUE
## class.weights numericvector <NA>      -
## fit                 logical    -   TRUE
## cache               integer    -     40
##                                                 Constr Req Tunable Trafo
## scaled                                               -   -    TRUE     -
## type              C-svc,nu-svc,C-bsvc,spoc-svc,kbb-svc   -    TRUE     -
## kernel        vanilladot,polydot,rbfdot,tanhdot,lap...   -    TRUE     -
## C                                             0 to Inf   Y    TRUE     -
## nu                                            0 to Inf   Y    TRUE     -
## epsilon                                    -Inf to Inf   Y    TRUE     -
## sigma                                         0 to Inf   Y    TRUE     -
## degree                                        1 to Inf   Y    TRUE     -
## scale                                         0 to Inf   Y    TRUE     -
## offset                                     -Inf to Inf   Y    TRUE     -
## order                                      -Inf to Inf   Y    TRUE     -
## tol                                           0 to Inf   -    TRUE     -
## shrinking                                            -   -    TRUE     -
## class.weights                                 0 to Inf   -    TRUE     -
## fit                                                  -   -   FALSE     -
## cache                                         1 to Inf   -    TRUE     -
\end{verbatim}


{\ttfamily\noindent\bfseries\color{errorcolor}{\#\# Error in checkClass(x, classes, ordered, null.ok): nie znaleziono obiektu 'trainTask'}}

{\ttfamily\noindent\bfseries\color{errorcolor}{\#\# Error in isTRUE(lhs): nie znaleziono obiektu 'ksvm\_tune\_params'}}

{\ttfamily\noindent\bfseries\color{errorcolor}{\#\# Error in checkLearner(learner): nie znaleziono obiektu 'ksvm\_tuner\_learner'}}

{\ttfamily\noindent\bfseries\color{errorcolor}{\#\# Error in predict(ksvm\_model, testTask): nie znaleziono obiektu 'ksvm\_model'}}

{\ttfamily\noindent\bfseries\color{errorcolor}{\#\# Error in checkClass(x, classes, ordered, null.ok): nie znaleziono obiektu 'ksvm\_pred'}}\end{kframe}
\end{knitrout}
\subsubsection{XGBoost}
\begin{knitrout}
\definecolor{shadecolor}{rgb}{0.969, 0.969, 0.969}\color{fgcolor}\begin{kframe}


{\ttfamily\noindent\color{warningcolor}{\#\# Warning in makeParam(id = id, type = "{}numeric"{}, learner.param = TRUE, lower = lower, : NA used as a default value for learner parameter missing.\\\#\# ParamHelpers uses NA as a special value for dependent parameters.}}

{\ttfamily\noindent\color{warningcolor}{\#\# Warning in makeParam(id = id, type = "{}numeric"{}, learner.param = TRUE, lower = lower, : NA used as a default value for learner parameter missing.\\\#\# ParamHelpers uses NA as a special value for dependent parameters.}}\begin{verbatim}
##                                 Type  len             Def
## booster                     discrete    -          gbtree
## watchlist                    untyped    -          <NULL>
## eta                          numeric    -             0.3
## gamma                        numeric    -               0
## max_depth                    integer    -               6
## min_child_weight             numeric    -               1
## subsample                    numeric    -               1
## colsample_bytree             numeric    -               1
## colsample_bylevel            numeric    -               1
## num_parallel_tree            integer    -               1
## lambda                       numeric    -               1
## lambda_bias                  numeric    -               0
## alpha                        numeric    -               0
## objective                    untyped    - binary:logistic
## eval_metric                  untyped    -           error
## base_score                   numeric    -             0.5
## max_delta_step               numeric    -               0
## missing                      numeric    -                
## monotone_constraints   integervector <NA>               0
## tweedie_variance_power       numeric    -             1.5
## nthread                      integer    -               -
## nrounds                      integer    -               1
## feval                        untyped    -          <NULL>
## verbose                      integer    -               1
## print_every_n                integer    -               1
## early_stopping_rounds        integer    -          <NULL>
## maximize                     logical    -          <NULL>
## sample_type                 discrete    -         uniform
## normalize_type              discrete    -            tree
## rate_drop                    numeric    -               0
## skip_drop                    numeric    -               0
## callbacks                    untyped    -                
##                                      Constr Req Tunable Trafo
## booster                gbtree,gblinear,dart   -    TRUE     -
## watchlist                                 -   -   FALSE     -
## eta                                  0 to 1   -    TRUE     -
## gamma                              0 to Inf   -    TRUE     -
## max_depth                          1 to Inf   -    TRUE     -
## min_child_weight                   0 to Inf   -    TRUE     -
## subsample                            0 to 1   -    TRUE     -
## colsample_bytree                     0 to 1   -    TRUE     -
## colsample_bylevel                    0 to 1   -    TRUE     -
## num_parallel_tree                  1 to Inf   -    TRUE     -
## lambda                             0 to Inf   -    TRUE     -
## lambda_bias                        0 to Inf   -    TRUE     -
## alpha                              0 to Inf   -    TRUE     -
## objective                                 -   -   FALSE     -
## eval_metric                               -   -   FALSE     -
## base_score                      -Inf to Inf   -   FALSE     -
## max_delta_step                     0 to Inf   -    TRUE     -
## missing                         -Inf to Inf   -   FALSE     -
## monotone_constraints                -1 to 1   -    TRUE     -
## tweedie_variance_power               1 to 2   Y    TRUE     -
## nthread                            1 to Inf   -   FALSE     -
## nrounds                            1 to Inf   -    TRUE     -
## feval                                     -   -   FALSE     -
## verbose                              0 to 2   -   FALSE     -
## print_every_n                      1 to Inf   Y   FALSE     -
## early_stopping_rounds              1 to Inf   -   FALSE     -
## maximize                                  -   -   FALSE     -
## sample_type                uniform,weighted   Y    TRUE     -
## normalize_type                  tree,forest   Y    TRUE     -
## rate_drop                            0 to 1   Y    TRUE     -
## skip_drop                            0 to 1   Y    TRUE     -
## callbacks                                 -   -   FALSE     -
\end{verbatim}


{\ttfamily\noindent\bfseries\color{errorcolor}{\#\# Error in checkClass(x, classes, ordered, null.ok): nie znaleziono obiektu 'trainTask'}}

{\ttfamily\noindent\bfseries\color{errorcolor}{\#\# Error in isTRUE(lhs): nie znaleziono obiektu 'xgb\_tuned\_params'}}

{\ttfamily\noindent\bfseries\color{errorcolor}{\#\# Error in checkLearner(learner): nie znaleziono obiektu 'xgb\_tuned\_learner'}}

{\ttfamily\noindent\bfseries\color{errorcolor}{\#\# Error in predict(xgb\_model, testTask): nie znaleziono obiektu 'xgb\_model'}}

{\ttfamily\noindent\bfseries\color{errorcolor}{\#\# Error in checkClass(x, classes, ordered, null.ok): nie znaleziono obiektu 'xgb\_pred'}}\end{kframe}
\end{knitrout}

\subsection{Krzywa ROC oraz krzywa PR}
\begin{knitrout}
\definecolor{shadecolor}{rgb}{0.969, 0.969, 0.969}\color{fgcolor}\begin{kframe}


{\ttfamily\noindent\bfseries\color{errorcolor}{\#\# Error in eval(expr, envir, enclos): nie znaleziono obiektu 'log\_pred'}}

{\ttfamily\noindent\bfseries\color{errorcolor}{\#\# Error in generateThreshVsPerfData(obj = list\_of\_pred, measures = list\_of\_measures): nie znaleziono obiektu 'list\_of\_pred'}}

{\ttfamily\noindent\bfseries\color{errorcolor}{\#\# Error in eval(expr, envir, enclos): nie znaleziono obiektu 'score\_test'}}

{\ttfamily\noindent\bfseries\color{errorcolor}{\#\# Error in fun\_ROC\_PR\_curve\_ggplot(score\_test): nie znaleziono obiektu 'score\_test'}}\end{kframe}
\end{knitrout}
\subsection{Tabela miar}
\begin{knitrout}
\definecolor{shadecolor}{rgb}{0.969, 0.969, 0.969}\color{fgcolor}\begin{kframe}


{\ttfamily\noindent\bfseries\color{errorcolor}{\#\# Error in eval(expr, envir, enclos): nie znaleziono obiektu 'rf\_tuned\_learner'}}

{\ttfamily\noindent\bfseries\color{errorcolor}{\#\# Error in eval(expr, envir, enclos): nie znaleziono obiektu 'aucpr'}}

{\ttfamily\noindent\bfseries\color{errorcolor}{\#\# Error in isScalarValue(x): nie znaleziono obiektu 'list\_of\_models'}}

{\ttfamily\noindent\bfseries\color{errorcolor}{\#\# Error in data.frame(table\_of\_measure): nie znaleziono obiektu 'table\_of\_measure'}}

{\ttfamily\noindent\bfseries\color{errorcolor}{\#\# Error in eval(lhs, parent, parent): nie znaleziono obiektu 'table\_of\_measure'}}

{\ttfamily\noindent\bfseries\color{errorcolor}{\#\# Error in order(scores.class0): nie znaleziono obiektu 'testTask'}}

{\ttfamily\noindent\bfseries\color{errorcolor}{\#\# Error in eval(lhs, parent, parent): nie znaleziono obiektu 'table\_of\_measure'}}\end{kframe}
\end{knitrout}

\section{Wnioski}




\end{document}
